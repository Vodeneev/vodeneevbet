# Bookmaker services: one container per контора (fonbet, pinnacle, pinnacle888).
# Deploy on one VM or spread across different VMs; parser-orchestrator aggregates via bookmaker_services URLs.

services:
  fonbet:
    image: ghcr.io/${IMAGE_OWNER:-vodeneev}/vodeneevbet-bookmaker-service:${IMAGE_TAG:-main}
    container_name: vodeneevbet-fonbet
    restart: unless-stopped
    command: ["-parser", "fonbet", "-config", "/app/configs/production.yaml"]
    logging:
      driver: json-file
      options:
        max-size: "50m"
        max-file: "3"
    ports:
      - "8081:8080"   # orchestrator: http://<host>:8081/matches
    volumes:
      - ./configs:/app/configs:ro
      - ./keys:/app/keys:ro

  pinnacle:
    image: ghcr.io/${IMAGE_OWNER:-vodeneev}/vodeneevbet-bookmaker-service:${IMAGE_TAG:-main}
    container_name: vodeneevbet-pinnacle
    restart: unless-stopped
    command: ["-parser", "pinnacle", "-config", "/app/configs/production.yaml"]
    logging:
      driver: json-file
      options:
        max-size: "50m"
        max-file: "3"
    ports:
      - "8082:8080"   # orchestrator: http://<host>:8082/matches
    environment:
      - PINNACLE_API_KEY=${PINNACLE_API_KEY:-}
      - PINNACLE_DEVICE_UUID=${PINNACLE_DEVICE_UUID:-}
    volumes:
      - ./configs:/app/configs:ro
      - ./keys:/app/keys:ro

  pinnacle888:
    image: ghcr.io/${IMAGE_OWNER:-vodeneev}/vodeneevbet-bookmaker-service:${IMAGE_TAG:-main}
    container_name: vodeneevbet-pinnacle888
    restart: unless-stopped
    command: ["-parser", "pinnacle888", "-config", "/app/configs/production.yaml"]
    logging:
      driver: json-file
      options:
        max-size: "50m"
        max-file: "3"
    ports:
      - "8083:8080"   # orchestrator: http://<host>:8083/matches
    environment:
      - PINNACLE888_API_KEY=${PINNACLE888_API_KEY:-}
      - PINNACLE888_DEVICE_UUID=${PINNACLE888_DEVICE_UUID:-}
    volumes:
      - ./configs:/app/configs:ro
      - ./keys:/app/keys:ro
