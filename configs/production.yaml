parser:
  # Production parser management
  # Empty array [] = run all registered parsers (local mode)
  enabled_parsers: ["fonbet", "pinnacle888", "xbet1"]

  # Orchestrator mode: if bookmaker_services is set, parser does NOT run parsers locally,
  # but aggregates /matches from these URLs and triggers /parse on them.
  # Deploy one bookmaker-service per контора (e.g. on different hardware), then set:
  # bookmaker_services:
  #   fonbet: "http://fonbet-service:8080"
  #   pinnacle: "http://pinnacle-service:8080"
  #   pinnacle888: "http://pinnacle888-service:8080"
  #   marathonbet: "http://marathonbet-service:8080"
  bookmaker_services:
    fonbet: "http://158.160.159.73:8081"
    # pinnacle: "http://158.160.159.73:8082"  # Disabled - need new proxies
    pinnacle888: "http://158.160.159.73:8083"
    # marathonbet: "http://158.160.159.73:8084"  # Disabled - need new proxies
    xbet1: "http://158.160.159.73:8085"

  user_agent: "ValueBetBot/1.0 (https://github.com/Vodeneev/vodeneevbet)"
  timeout: 120s
  interval: 2m   # Periodic parsing interval; triggers new parsing cycle for all parsers
  
  # Incremental parsing configuration
  # When enabled, parsers work in background, parsing data continuously (e.g., by leagues)
  # and updating storage incrementally. This allows /matches endpoint to return
  # partially ready data without blocking on long-running parsers.
  incremental_parsing:
    enabled: true                    # Enable incremental parsing mode
    # timeout: 0                     # Timeout for one parsing cycle (0 = no timeout, process all leagues)
  
  headers:
    "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8"
    "Accept-Language": "ru-RU,ru;q=0.9,en;q=0.8"
    "Accept-Encoding": "gzip, deflate, br"
    "Connection": "keep-alive"
    "Upgrade-Insecure-Requests": "1"
  
  # Fonbet API settings
  fonbet:
    base_url: "https://line55w.bk6bba-resources.com/events/list"
    lang: "en"
    version: "60312723953"

  # Pinnacle guest API
  pinnacle:
    base_url: "https://guest.api.arcadia.pinnacle.com"
    api_key: ""        # can be set via ENV PINNACLE_API_KEY
    device_uuid: ""    # can be set via ENV PINNACLE_DEVICE_UUID
    matchup_ids: []    # example: [1621112306, 1621112308]
    # Proxy list for bypassing Cloudflare blocking
    # Client will try proxies in order until one works
    # Format: http://user:pass@ip:port or http://ip:port
    proxy_list:
      - "http://rzarbuxl:r9u5g3bynx8r@142.111.48.253:7030"  # USA, Los Angeles
      - "http://rzarbuxl:r9u5g3bynx8r@23.95.150.145:6114"   # USA, Buffalo
      - "http://rzarbuxl:r9u5g3bynx8r@198.23.239.134:6540"  # USA, Buffalo
      - "http://rzarbuxl:r9u5g3bynx8r@107.172.163.27:6543"  # USA, Bloomingdale
      - "http://rzarbuxl:r9u5g3bynx8r@198.105.121.200:6462" # USA, Bloomingdale
      - "http://rzarbuxl:r9u5g3bynx8r@64.137.96.74:6641"   # UK, London
      - "http://rzarbuxl:r9u5g3bynx8r@84.247.60.125:6095"   # Spain, Madrid
      - "http://rzarbuxl:r9u5g3bynx8r@216.10.27.159:6837"   # Poland, Warsaw
      - "http://rzarbuxl:r9u5g3bynx8r@23.26.71.145:5628"     # USA, Dallas
      - "http://rzarbuxl:r9u5g3bynx8r@23.27.208.120:5830"   # USA, Orem

  # Pinnacle888 guest API with mirror URL support
  # Marathonbet HTML parser (all-events → leagues → full event page per match)
  marathonbet:
    base_url: "https://www.marathonbet.ru"
    sport_id: 11       # Football
    timeout: 45s
    # user_agent: ""   # uses parser.user_agent if not set
    # Proxy list for bypassing IP blocking (403 errors)
    # Client will try proxies in order until one works
    # Format: http://user:pass@ip:port or http://ip:port
    proxy_list:
      - "http://tdqhhche:plckg23leso8@31.59.20.176:6754"     # UK, London
      - "http://tdqhhche:plckg23leso8@23.95.150.145:6114"   # USA, Buffalo
      - "http://tdqhhche:plckg23leso8@198.23.239.134:6540"  # USA, Buffalo
      - "http://tdqhhche:plckg23leso8@45.38.107.97:6014"    # UK, London
      - "http://tdqhhche:plckg23leso8@107.172.163.27:6543"  # USA, Bloomingdale
      - "http://tdqhhche:plckg23leso8@198.105.121.200:6462" # UK, City Of London
      - "http://tdqhhche:plckg23leso8@64.137.96.74:6641"    # Spain, Madrid
      - "http://tdqhhche:plckg23leso8@216.10.27.159:6837"   # USA, Dallas
      - "http://tdqhhche:plckg23leso8@23.26.71.145:5628"    # USA, Orem
      - "http://tdqhhche:plckg23leso8@23.229.19.94:8689"    # USA, Los Angeles

  pinnacle888:
    base_url: ""       # Optional: direct base URL (if mirror_url is not provided)
    mirror_url: "https://bit.ly/pinnacle_mirror"  # Mirror URL to resolve actual baseURL
    odds_url: "/sports-service/sv/euro/odds"  # Path for odds endpoint (domain will be resolved from mirror_url)
    api_key: ""        # can be set via ENV PINNACLE888_API_KEY
    device_uuid: ""    # can be set via ENV PINNACLE888_DEVICE_UUID
    matchup_ids: []    # example: [1621112306, 1621112308]
    include_prematch: true  # Include pre-match/line matches (default: false)
    league_workers: 5   # Max concurrent leagues (default: 5); events within a league are sequential
    # Proxy list for bypassing Cloudflare blocking
    # Client will try proxies in order until one works
    # Format: http://user:pass@ip:port or http://ip:port
    proxy_list: []    # Can reuse pinnacle proxy_list if needed
    # Authentication headers for logged-in user (for live matches with actual odds)
    # Extract these from browser DevTools Network tab when making authenticated requests
    # Note: Cookies and x-app-data contain session values that may need periodic updates
    use_auth_headers: true  # Enable authenticated headers (default: false)
    # Full cookie string - contains both static and session cookies
    # Session cookies that may change: BrowserSessionId, session, _ga_5PLZ6DPTZ0, _lastView, PCTR
    cookies: "skin=pa; lang=en_US; _vid=ac036dbc56a4a824a252ab979d7ddfb0; afrc=A609039776; dpLk3=E_MA3; _sig=Scy1ZbVZrTldJNFl6VXpOR1F3WldZNU53OnpVdTlZVnpkeEYwbUgxNTZ5akVOam9YM1g6LTU0MzQwMzEwMTo3NzA3NDAxNzk6Mi4xMS4wOllwVUxCcGlpQ3c%3D; _apt=YpULBpiiCw; _ga=GA1.1.414856407.1770740181; PCTR=1928506612714; custid=id=VODENEEVM&login=202602101216&roundTrip=202602101216&hash=B3F2F5AF8A4520AD4E3B474AA3567BD9; BrowserSessionId=b553b87d-9ce5-4e17-b375-745db116bf37; _og=QQ==; _ulp=TDV6YVJod0xqREFDUVBXc05McXBSb2k0dDRVbXdvcm04aUxHOFlUcEZ6ZEN5M2xRWUtFeHo2TW5LUHR5MDNPZWVqa041Nk1ySFlyWG1DaXVXRjY5REE9PXxmNjY4NjBmODNiZTJmMzYyMmYzMjEzYzhhNGMxMWQyYg==; uoc=450f4a9c12b96e79968ebfa6b0fe147e; _userDefaultView=FUTURE; SLID=73877049; pctag=889057e0-5962-4db2-b975-2acc20c61336; auth=true; __prefs=W251bGwsMSwxLDAsMCxudWxsLGZhbHNlLDAuMDAwMCxmYWxzZSx0cnVlLCJfMUxJTkUiLDAsbnVsbCx0cnVlLHRydWUsZmFsc2UsZmFsc2UsbnVsbCxudWxsLHRydWUsIlNNQUxMIiwwXQ==; u=AAAABAAAAAADp14LAAABnEjDsRIeQS07z6CJACeDQzAWPrR9y2IZZrqJKUFrFqdykW8Gzg==; lcu=AAAABAAAAAADp14LAAABnEjDsRIeQS07z6CJACeDQzAWPrR9y2IZZrqJKUFrFqdykW8Gzg==; isShowAcceptTC=false; locale=en_US; _loginId=; session=%7B%2522userName%2522%3A%2522undefined%2522%252C%2522id%2522%3A%2522undefined%2522%252C%2522role%2522%3A%7B%2522bitMask%2522%3A2%252C%2522title%2522%3A%2522user%2522%7D%7D; displayMessPopUp=true; closeAnnTime=0; currentPage=homePageContainer; _lastView=eyJ2b2RlbmVldm0iOiJDT01QQUNUIn0%3D; _ga_5PLZ6DPTZ0=GS2.1.s1770743149$o2$g1$t1770744469$j50$l0$h0"
    # x-app-data contains session-specific values (BrowserSessionId, PCTR) - may need periodic updates
    x_app_data: "directusToken=TwEdnphtyxsfMpXoJkCkWaPsL2KJJ3lo;BrowserSessionId=b553b87d-9ce5-4e17-b375-745db116bf37;PCTR=1928506612714;_og=QQ%3D%3D;_ulp=TDV6YVJod0xqREFDUVBXc05McXBSb2k0dDRVbXdvcm04aUxHOFlUcEZ6ZEN5M2xRWUtFeHo2TW5LUHR5MDNPZWVqa041Nk1ySFlyWG1DaXVXRjY5REE9PXxmNjY4NjBmODNiZTJmMzYyMmYzMjEzYzhhNGMxMWQyYg%3D%3D;custid=id%3DVODENEEVM%26login%3D202602101216%26roundTrip%3D202602101216%26hash%3DB3F2F5AF8A4520AD4E3B474AA3567BD9;_userDefaultView=FUTURE;__prefs=W251bGwsMSwxLDAsMCxudWxsLGZhbHNlLDAuMDAwMCxmYWxzZSx0cnVlLCJfMUxJTkUiLDAsbnVsbCx0cnVlLHRydWUsZmFsc2UsZmFsc2UsbnVsbCxudWxsLHRydWUsIlNNQUxMIiwwXQ%3D%3D;pctag=889057e0-5962-4db2-b975-2acc20c61336;lang=en_US;dpLk3=E_MA3"
    x_custid: "id=VODENEEVM&login=202602101216&roundTrip=202602101216&hash=B3F2F5AF8A4520AD4E3B474AA3567BD9"  # User ID - more stable

  # 1xbet API settings
  xbet1:
    base_url: "https://1xlite-6173396.bar"  # Fixed host (skip mirror to avoid 406 from some nodes)
    mirror_url: "https://1xbet-skwu.top/link"  # Fallback when base_url empty
    include_prematch: true  # Include pre-match matches (default: true)
    sport_id: 1        # Sport ID (1 = Football, default: 1)
    country_id: 1      # Country ID (1 = All countries, default: 1)
    virtual_sports: true  # Include virtual sports (default: true)
    # Proxy list for bypassing blocking
    # Client will try proxies in order until one works
    # Format: http://user:pass@ip:port or http://ip:port
    proxy_list: []    # Optional: can reuse other proxy lists if needed

health:
  # HTTP server settings
  port: 8080                # HTTP server listen port (default: 8080)
  read_header_timeout: 5s   # Timeout for reading HTTP headers (default: 5s)
  async_parsing_timeout: 900s  # Timeout for periodic + /matches parsing; Pinnacle888 needs more time for 147+ leagues (prematch ~6min + live)

value_calculator:
  # Data source: use parser's /matches endpoint
  parser_url: "http://158.160.168.187/parser"  # URL to parser service (e.g. "http://parser:8080" in Docker)
  
  # Filters for parsers
  sports: ["football"]             # Sports to parse (used by parsers, not calculator)
  
  # Note: For value bets calculation, we use ALL bookmakers with weighted average
  
  # Bookmaker weights for weighted average calculation (optional)
  # Higher weight = more influence on fair probability calculation
  # Default: 1.0 for all bookmakers if not specified
  bookmaker_weights:
    # pinnacle: 1.0      # Reference bookmaker - maximum weight (disabled - need new proxies)
    fonbet: 1.0        # Weight set to 1.0 (will be adjusted later)
    pinnacle888: 1.0   # Weight set to 1.0 (will be adjusted later)
    xbet1: 1.0         # Weight set to 1.0 (will be adjusted later)
    # marathonbet: 0.9   # High weight - reliable line, Russian market (disabled - need new proxies)
  
  # Minimum value percent to show value bets (default: 5.0)
  min_value_percent: 5.0
  
  # Async processing settings
  async_enabled: true              # Enable asynchronous processing
  async_interval: 30s              # Interval for async processing (every 30 seconds)
  alert_threshold: 30.0            # Send Telegram alerts only for diffs >= 30%
  telegram_bot_token: ""          # Telegram bot token (set via TELEGRAM_BOT_TOKEN env var)
  telegram_chat_id: 0              # Telegram chat ID to send notifications (set via TELEGRAM_CHAT_ID env var)

logging:
  # Yandex Cloud Logging settings
  enabled: true                    # Enable sending logs to Yandex Cloud Logging
  group_name: "default"            # Log group name (can be set via YC_LOG_GROUP_NAME env var)
  group_id: ""                     # Log group ID (alternative to group_name, can be set via YC_LOG_GROUP_ID env var)
  folder_id: ""                    # Folder ID (can be set via YC_FOLDER_ID env var)
  level: "INFO"                    # Minimum log level: DEBUG, INFO, WARN, ERROR (default: INFO)
  batch_size: 10                   # Batch size for sending logs (default: 10)
  flush_interval: 5s               # Interval for flushing log batch (default: 5s)
  # Labels for filtering in Yandex Cloud Logging interface
  project_label: ""                # Project name label (default: "vodeneevbet", can be set via YC_LOG_PROJECT_LABEL env var)
  service_label: ""                # Service name label (default: service name from code, can be set via YC_LOG_SERVICE_LABEL env var)
  cluster_label: ""                # Cluster/folder name label (default: "production", can be set via YC_LOG_CLUSTER_LABEL env var)
